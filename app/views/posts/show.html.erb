<div class="p-4 post-bg">
  <p class="mb-3"><%= "@#{@post.user.nickname}, #{time_ago_in_words(@post.created_at)}" %></p>
  <h2> <%= @post.title %></h2>
  <p> <%= simple_format(@post.body) %></p>
  <% if current_user.id == @post.user_id %>
    <div class="d-flex">
      <%= link_to "Edit", edit_post_path(@post), class: 'btn btn-warning' %>
      <%= button_to "Delete post", post_path(@post), method: :delete,
                    data:                                    { confirm: "You are sure?" }, class: 'btn btn-danger mx-3' %>
    </div>
  <% end %>
</div>
<hr>

<h3 class="mb-5">All Comments</h3>
<div>
  <% @post.comments.each do |comment| %>
    <div class="alert post-bg">
      <div class="d-flex justify-content-between">
        <p><strong><%= comment.username %></strong>: <%= comment.body %></p>
        <p><%= comment.created_at.strftime("%d %b. %Y") %></p>
      </div>
      <hr>
    </div>
  <% end %>
</div>
<hr>
<h2> Add comment </h2>
<%= form_with(model: [@post, @post.comments.build], local: true) do |f| %>
  <p>
    <%= f.label :username, 'User' %>
    <%= f.text_field(:username, class: 'form-control') %>
  </p>
  <p>
    <%= f.label :body, 'Comment' %>
    <%= f.text_area(:body, class: 'form-control') %>
  </p>
  <p>
    <%= f.submit('Add comment', class: 'btn btn-warning') %>
  </p>
<% end %>

